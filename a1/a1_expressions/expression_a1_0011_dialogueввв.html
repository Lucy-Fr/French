<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Grand dialogue ‚Äî Expressions √† choix</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; line-height: 1.6; }
    .question { margin-bottom: 20px; }
    .correct { background-color: #c8f7c5; }
    .missed { background-color: #fce3e3; }
    .hint { display: none; color: gray; margin-top: 5px; font-style: italic; }
    select { padding: 6px; }
    button { margin: 5px 0; }
  </style>
</head>
<body>

<h2>üó£Ô∏è Grand dialogue ‚Äî Choisissez les expressions correctes</h2>
<p>Compl√©tez ce dialogue avec les bonnes expressions. Cliquez sur üîç pour obtenir un indice si besoin.</p>

<div id="dialogue"></div>

<p id="score"></p>
<button onclick="checkAnswers()">V√©rifier</button>
<button onclick="location.reload()">R√©initialiser</button>

<p>
  <a href="../a1_expressions.html">‚Üê Retour aux expressions</a> |
  <a href="../../index.html">üè† Accueil</a>
</p>

<script>
const expressions = [
  "√áa me va", "Tu g√®res", "Je croise les doigts", "C‚Äôest pas grave", "On y va ?",
  "T‚Äôinqui√®te", "C‚Äôest clair", "Tu plaisantes", "J‚Äôen ai marre", "Je suis partant",
  "Tu m‚Äô√©tonnes", "C‚Äôest pas gagn√©", "Je n‚Äôen peux plus", "Fais gaffe", "C‚Äôest du jamais vu"
];

const distractors = [
  "Je m‚Äôen fiche", "Bonne nuit", "Je me suis perdu", "Tu veux du caf√© ?", "Je pars en vacances",
  "√áa sent bon", "J‚Äôarrive plus tard", "Je suis press√©", "C‚Äôest bizarre", "Tu fais la vaisselle ?"
];

const dialogueLines = [
  {
    text: "‚Äî Salut ! Tu es pr√™t pour ce soir ?",
    gap: false
  },
  {
    text: "‚Äî Presque. Il me manque encore un t-shirt. Celui-l√†, ___ ?",
    answer: "√áa me va",
    hint: "Expression pour dire qu‚Äôun v√™tement convient."
  },
  {
    text: "‚Äî Oui, nickel. Et la playlist ?",
    gap: false
  },
  {
    text: "‚Äî D√©j√† faite, et j‚Äôai tout mix√© moi-m√™me. ‚Äî ___ !",
    answer: "Tu g√®res",
    hint: "Compliment pour dire que quelqu‚Äôun fait quelque chose tr√®s bien."
  },
  {
    text: "‚Äî Tu crois que beaucoup de gens vont venir ?",
    gap: false
  },
  {
    text: "‚Äî Je ne sais pas‚Ä¶ ___ !",
    answer: "Je croise les doigts",
    hint: "Expression pour exprimer l‚Äôespoir."
  },
  {
    text: "‚Äî Et Max ? Il a encore oubli√© d‚Äôapporter les boissons‚Ä¶",
    gap: false
  },
  {
    text: "‚Äî ___, il oublie toujours !",
    answer: "Tu m‚Äô√©tonnes",
    hint: "Expression ironique quand quelque chose ne surprend pas."
  },
  {
    text: "‚Äî Il faut vraiment tout faire nous-m√™mes.",
    gap: false
  },
  {
    text: "‚Äî ___, s√©rieux !",
    answer: "J‚Äôen ai marre",
    hint: "Pour dire qu‚Äôon en a assez."
  },
  {
    text: "‚Äî Bon, on y va ou pas ?",
    gap: false
  },
  {
    text: "‚Äî Oui, bien s√ªr. ___",
    answer: "On y va ?",
    hint: "Forme interrogative pour proposer de partir."
  },
  {
    text: "‚Äî Attention ! Tu as failli renverser le g√¢teau.",
    gap: false
  },
  {
    text: "‚Äî Oups, ___ !",
    answer: "Fais gaffe",
    hint: "Alerte pour dire de faire attention."
  },
  {
    text: "‚Äî Il y a d√©j√† 30 personnes dans le salon.",
    gap: false
  },
  {
    text: "‚Äî S√©rieux ? ___ !",
    answer: "C‚Äôest du jamais vu",
    hint: "Pour dire que c‚Äôest exceptionnel."
  },
  {
    text: "‚Äî Et si on allait danser ?",
    gap: false
  },
  {
    text: "‚Äî ___ ! J‚Äôadore cette chanson.",
    answer: "Je suis partant",
    hint: "Expression pour dire qu‚Äôon est d‚Äôaccord pour faire quelque chose."
  },
  {
    text: "‚Äî Mince, j‚Äôai √©cras√© un verre‚Ä¶",
    gap: false
  },
  {
    text: "‚Äî ___, √ßa arrive.",
    answer: "C‚Äôest pas grave",
    hint: "Pour rassurer quand quelqu‚Äôun fait une erreur."
  },
  {
    text: "‚Äî Tu crois que Paul va enfin venir ?",
    gap: false
  },
  {
    text: "‚Äî ___, avec lui on ne sait jamais.",
    answer: "C‚Äôest pas gagn√©",
    hint: "Expression quand on doute du succ√®s de quelque chose."
  }
];

function shuffle(arr) {
  return [...arr].sort(() => Math.random() - 0.5);
}

function createDialogue() {
  const container = document.getElementById("dialogue");
  let qIndex = 0;

  dialogueLines.forEach((line, i) => {
    let html = `<div class="question"><strong>Ligne ${i + 1}:</strong> `;
    if (line.gap === false && !line.answer) {
      html += `${line.text}</div>`;
    } else {
      const allOptions = shuffle([
        line.answer,
        ...shuffle(distractors).slice(0, 5)
      ]);
      html += `${line.text.replace("___", `
        <select id="q${qIndex}">
          <option value="">‚Äî</option>
          ${allOptions.map(e => `<option value="${e}">${e}</option>`).join("")}
        </select>
        <button onclick="document.getElementById('hint${qIndex}').style.display='inline'">üîç Voir l‚Äôindice</button>
        <span class="hint" id="hint${qIndex}">${line.hint}</span>
      `)}</div>`;
      qIndex++;
    }
    container.innerHTML += html;
  });
}

function checkAnswers() {
  let score = 0;
  let total = 0;
  let qIndex = 0;
  dialogueLines.forEach(line => {
    if (line.answer) {
      const input = document.getElementById("q" + qIndex);
      if (input) {
        total++;
        const user = input.value;
        input.classList.remove("correct", "missed");
        if (user === line.answer) {
          input.classList.add("correct");
          score++;
        } else {
          input.classList.add("missed");
        }
        qIndex++;
      }
    }
  });
  document.getElementById("score").innerText = `R√©sultat : ${score} / ${total} bonne(s) r√©ponse(s).`;
}

window.onload = createDialogue;
</script>

</body>
</html>
