<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Expressions courantes (7) ‚Äî dialogues + audio + insertion libre</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; }
    .question { margin-bottom: 25px; }
    .correct { background-color: #c8f7c5; }
    .missed { background-color: #fce3e3; }
    select, input[type="text"] { padding: 5px; }
    button { margin: 10px 5px; }
    table { border-collapse: collapse; margin-bottom: 30px; }
    th, td { padding: 6px 12px; border: 1px solid #ccc; text-align: left; }
  </style>
</head>
<body>

<h2>üìò Expressions courantes ‚Äî S√©rie 7</h2>
<p>Voici une nouvelle s√©rie d'expressions famili√®res avec leur traduction en russe et une explication grammaticale :</p>

<table>
  <tr><th>Expression</th><th>–ü–µ—Ä–µ–≤–æ–¥</th><th>–û–±—ä—è—Å–Ω–µ–Ω–∏–µ</th></tr>
  <tr><td>Tu m‚Äô√©tonnes</td><td>–î–∞ —É–∂ / –ù–µ —É–¥–∏–≤–ª—ë–Ω</td><td>–ò—Ä–æ–Ω–∏—á–µ—Å–∫–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ</td></tr>
  <tr><td>√áa te va ?</td><td>–¢–µ–±–µ –ø–æ–¥—Ö–æ–¥–∏—Ç?</td><td>–í—ã—Ä–∞–∂–µ–Ω–∏–µ —Å ¬´aller¬ª</td></tr>
  <tr><td>C‚Äôest pas grave</td><td>–ù–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ</td><td>–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ —Å ¬´√™tre¬ª</td></tr>
  <tr><td>Franchement</td><td>–ß–µ—Å—Ç–Ω–æ –≥–æ–≤–æ—Ä—è</td><td>–ù–∞—Ä–µ—á–∏–µ –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è</td></tr>
  <tr><td>T‚Äôinqui√®te</td><td>–ù–µ –≤–æ–ª–Ω—É–π—Å—è</td><td>–°–æ–∫—Ä–∞—â—ë–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ –æ—Ç ¬´ne t‚Äôinqui√®te pas¬ª</td></tr>
  <tr><td>J‚Äôarrive pas √† croire</td><td>–ù–µ –º–æ–≥—É –ø–æ–≤–µ—Ä–∏—Ç—å</td><td>–†–∞–∑–≥–æ–≤–æ—Ä–Ω–∞—è —Ñ–æ—Ä–º–∞ –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è + infinitif</td></tr>
  <tr><td>Y a pas de souci</td><td>–ë–µ–∑ –ø—Ä–æ–±–ª–µ–º</td><td>–°–æ–∫—Ä–∞—â—ë–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ –æ—Ç ¬´il n‚Äôy a pas de souci¬ª</td></tr>
  <tr><td>√áa fait longtemps</td><td>–î–∞–≤–Ω–æ –Ω–µ –≤–∏–¥–µ–ª–∏—Å—å</td><td>–í—ã—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏</td></tr>
  <tr><td>C‚Äôest clair</td><td>–Ø—Å–Ω–æ / –û–¥–Ω–æ–∑–Ω–∞—á–Ω–æ</td><td>–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ + –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ</td></tr>
  <tr><td>√áa me dit rien</td><td>–ú–Ω–µ —ç—Ç–æ –Ω–∏ –æ —á—ë–º –Ω–µ –≥–æ–≤–æ—Ä–∏—Ç</td><td>–§—Ä–∞–∑–∞ —Å –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ–º –∏ –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ–º</td></tr>
</table>

<h3>üß© Exercice 1 ‚Äî Choisissez l'expression correcte</h3>
<p>Compl√©tez chaque dialogue avec l'expression appropri√©e. Cliquez sur üîä pour √©couter.</p>
<div id="dropdown-exercise"></div>
<p id="score1"></p>

<h3>‚úçÔ∏è Exercice 2 ‚Äî √âcrivez l'expression correcte</h3>
<p>Inscrivez la bonne expression dans chaque espace vide.</p>
<div id="input-exercise"></div>
<p id="score2"></p>

<button onclick="checkDropdown(); checkInput();">V√©rifier</button>
<button onclick="location.reload()">R√©initialiser</button>

<p>
  <a href="../a1_expressions.html">‚Üê Retour aux expressions</a> |
  <a href="../../index.html">üè† Accueil</a>
</p>

<script>
const expressions = [
  "Tu m‚Äô√©tonnes", "√áa te va ?", "C‚Äôest pas grave", "Franchement", "T‚Äôinqui√®te",
  "J‚Äôarrive pas √† croire", "Y a pas de souci", "√áa fait longtemps", "C‚Äôest clair", "√áa me dit rien"
];

const dialogues = [
  {
    full: "‚Äî Il a encore oubli√© son rendez-vous. ‚Äî Tu m‚Äô√©tonnes.",
    withGap: "‚Äî Il a encore oubli√© son rendez-vous. ‚Äî ___",
    answer: "Tu m‚Äô√©tonnes"
  },
  {
    full: "‚Äî Je t‚Äôai pris une place √† gauche. √áa te va ?",
    withGap: "‚Äî Je t‚Äôai pris une place √† gauche. ___",
    answer: "√áa te va ?"
  },
  {
    full: "‚Äî D√©sol√© pour le retard. ‚Äî C‚Äôest pas grave.",
    withGap: "‚Äî D√©sol√© pour le retard. ‚Äî ___",
    answer: "C‚Äôest pas grave"
  },
  {
    full: "‚Äî Franchement, j‚Äôai pas aim√© le film.",
    withGap: "‚Äî ___, j‚Äôai pas aim√© le film.",
    answer: "Franchement"
  },
  {
    full: "‚Äî Je suis stress√© pour demain‚Ä¶ ‚Äî T‚Äôinqui√®te.",
    withGap: "‚Äî Je suis stress√© pour demain‚Ä¶ ‚Äî ___",
    answer: "T‚Äôinqui√®te"
  },
  {
    full: "‚Äî Il a gagn√© √† la loterie ? J‚Äôarrive pas √† croire !",
    withGap: "‚Äî Il a gagn√© √† la loterie ? ___ !",
    answer: "J‚Äôarrive pas √† croire"
  },
  {
    full: "‚Äî Merci pour ton aide. ‚Äî Y a pas de souci.",
    withGap: "‚Äî Merci pour ton aide. ‚Äî ___",
    answer: "Y a pas de souci"
  },
  {
    full: "‚Äî Salut ! √áa fait longtemps !",
    withGap: "‚Äî Salut ! ___ !",
    answer: "√áa fait longtemps"
  },
  {
    full: "‚Äî Il a copi√© mon travail. ‚Äî C‚Äôest clair qu‚Äôil abuse.",
    withGap: "‚Äî Il a copi√© mon travail. ‚Äî ___ qu‚Äôil abuse.",
    answer: "C‚Äôest clair"
  },
  {
    full: "‚Äî Ce nom me dit rien. ‚Äî Moi non plus, √ßa me dit rien.",
    withGap: "‚Äî Ce nom me dit rien. ‚Äî Moi non plus, ___",
    answer: "√áa me dit rien"
  }
];

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

function speak(text) {
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = 'fr-FR';
  const voices = speechSynthesis.getVoices();
  const fr = voices.find(v => v.lang === 'fr-FR');
  if (fr) utterance.voice = fr;
  speechSynthesis.speak(utterance);
}

speechSynthesis.onvoiceschanged = () => {};

function renderExercises() {
  const dropdownContainer = document.getElementById("dropdown-exercise");
  const inputContainer = document.getElementById("input-exercise");

  dialogues.forEach((dlg, i) => {
    const shuffled = shuffle([...expressions]);
    const options = shuffled.map(exp => `<option value="${exp}">${exp}</option>`).join("");
    
    dropdownContainer.innerHTML += `
      <div class="question">
        <button onclick="speak('${dlg.full}')">üîä √âcouter</button><br>
        ${dlg.withGap.replace("___", `<select id="dd${i}"><option value="">‚Äî</option>${options}</select>`)}
      </div>
    `;

    inputContainer.innerHTML += `
      <div class="question">
        ${dlg.withGap.replace("___", `<input type="text" id="in${i}" placeholder="...">`)}
      </div>
    `;
  });
}

function checkDropdown() {
  let score = 0;
  dialogues.forEach((dlg, i) => {
    const sel = document.getElementById("dd" + i);
    sel.classList.remove("correct", "missed");
    if (sel.value === dlg.answer) {
      sel.classList.add("correct");
      score++;
    } else {
      sel.classList.add("missed");
    }
  });
  document.getElementById("score1").innerText = `Exercice 1 : ${score} / ${dialogues.length}`;
}

function checkInput() {
  let score = 0;
  dialogues.forEach((dlg, i) => {
    const input = document.getElementById("in" + i);
    input.classList.remove("correct", "missed");
    if (input.value.trim().toLowerCase() === dlg.answer.toLowerCase()) {
      input.classList.add("correct");
      score++;
    } else {
      input.classList.add("missed");
    }
  });
  document.getElementById("score2").innerText = `Exercice 2 : ${score} / ${dialogues.length}`;
}

window.onload = renderExercises;
</script>

</body>
</html>
