<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Exercice Ã  lâ€™Ã©coute â€” Expressions (2)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; }
    .question { margin-bottom: 25px; }
    .correct { background-color: #c8f7c5; }
    .missed { background-color: #fce3e3; }
    .explanation { display: none; color: green; margin-top: 5px; }
    select { padding: 5px; }
    button { margin: 10px 5px; }
  </style>
</head>
<body>

<h2>ğŸ§ Exercice Ã  lâ€™Ã©coute â€” Expressions franÃ§aises (sÃ©rie 2)</h2>
<p>Cliquez sur ğŸ”Š pour Ã©couter la phrase, puis choisissez la bonne rÃ©ponse.</p>

<div id="audio-exercise"></div>

<button onclick="checkAudioAnswers()">VÃ©rifier</button>
<button onclick="location.reload()">RÃ©initialiser</button>

<p id="audio-score"></p>

<p>
  <a href="../a1_expressions.html">â† Retour aux expressions</a> |
  <a href="../../index.html">ğŸ  Accueil</a>
</p>

<script>
const questions = [
  ["Tu mâ€™Ã©tonnes !", ["Tu mâ€™Ã©tonnes !", "Pas de problÃ¨me", "Câ€™est pas grave"]],
  ["Je nâ€™en peux plus", ["Pas mal", "Tâ€™inquiÃ¨te", "Je nâ€™en peux plus"]],
  ["Tant mieux", ["Tant mieux", "Pas mal", "Jâ€™en ai marre"]],
  ["Tâ€™inquiÃ¨te", ["Tu mâ€™Ã©tonnes !", "Tâ€™inquiÃ¨te", "Comme tu veux"]],
  ["Ã€ tout Ã  lâ€™heure", ["Ã€ bientÃ´t", "Ã€ tout Ã  lâ€™heure", "Salut"]],
  ["Pas mal", ["Pas mal", "Pas du tout", "Tant mieux"]],
  ["Câ€™est pas grave", ["Ce nâ€™est pas grave", "Je nâ€™en peux plus", "Ã‡a dÃ©pend"]],
  ["Comme tu veux", ["Comme tu veux", "Tu mâ€™Ã©tonnes !", "Pas mal"]],
  ["Jâ€™en ai marre", ["Tâ€™inquiÃ¨te", "Jâ€™en ai marre", "Tant mieux"]],
  ["Ã‡a dÃ©pend", ["Ã‡a va", "Ã‡a dÃ©pend", "Dâ€™accord"]]
];

function speak(text) {
  const u = new SpeechSynthesisUtterance(text);
  u.lang = 'fr-FR';
  const voices = speechSynthesis.getVoices();
  const fr = voices.find(v => v.lang === 'fr-FR');
  if (fr) u.voice = fr;
  speechSynthesis.speak(u);
}

speechSynthesis.onvoiceschanged = () => {};

function renderAudioExercise() {
  const container = document.getElementById("audio-exercise");
  questions.forEach(([correct, options], i) => {
    const id = `q${i}`;
    let html = `<div class="question">
      <button onclick="speak('${correct}')">ğŸ”Š Ã‰couter</button>
      <select id="${id}">
        <option value="">â€” Choisissez une rÃ©ponse â€”</option>`;
    options.forEach(opt => {
      html += `<option value="${opt}">${opt}</option>`;
    });
    html += `</select>
      <div class="explanation" id="exp${id}">âœ… ${correct}</div>
    </div>`;
    container.innerHTML += html;
  });
}

function checkAudioAnswers() {
  let score = 0;
  questions.forEach(([correct], i) => {
    const sel = document.getElementById("q" + i);
    const exp = document.getElementById("expq" + i);
    sel.classList.remove("correct", "missed");
    if (sel.value === correct) {
      sel.classList.add("correct");
      score++;
    } else {
      sel.classList.add("missed");
    }
    document.getElementById("expq" + i)?.style?.setProperty("display", "block");
  });
  document.getElementById("audio-score").innerText = `RÃ©sultat : ${score} / ${questions.length}`;
}

window.onload = renderAudioExercise;
</script>

</body>
</html>
