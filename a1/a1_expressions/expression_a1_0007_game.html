<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Test auditif â€” Expressions courantes (SÃ©ries 6 et 7)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; line-height: 1.6; }
    .question { margin-bottom: 25px; }
    .correct { background-color: #c8f7c5; }
    .missed { background-color: #fce3e3; }
    .answer { margin-left: 10px; }
    input[type="text"] { padding: 6px; width: 300px; }
    button { margin: 10px 5px; }
  </style>
</head>
<body>

<h2>ğŸ§ Test auditif â€” Expressions des sÃ©ries 6 & 7</h2>
<p>Ã‰coutez chaque phrase et Ã©crivez l'expression manquante sans proposition. Exercice 100 % comprÃ©hension orale !</p>

<div id="test"></div>
<p id="score"></p>

<button onclick="checkTest()">VÃ©rifier</button>
<button onclick="location.reload()">RÃ©initialiser</button>

<p>
  <a href="../a1_expressions.html">â† Retour aux expressions</a> |
  <a href="../../index.html">ğŸ  Accueil</a>
</p>

<script>
const data = [
  ["Tu rigoles ou quoi ? ___ !", "arrÃªte tes conneries"],
  ["Câ€™est pas la peine, ___ !", "laisse tomber"],
  ["Regarde-moi ce bazar... â€” ___", "câ€™est nâ€™importe quoi"],
  ["â€” Tâ€™as tout compris ? â€” ___", "tu gÃ¨res"],
  ["â€” Je veux pas y aller... â€” ___", "Ã§a me saoule"],
  ["â€” Jâ€™ai fait une erreur Ã©norme... â€” ___", "je me suis plantÃ©"],
  ["â€” Tâ€™as ton pass ? â€” ___", "bien sÃ»r"],
  ["â€” Allez viens, ___ !", "on sâ€™arrache"],
  ["â€” Encore lui ? ___", "Ã§a mâ€™Ã©nerve"],
  ["â€” Il arrive dans 5 minutes. â€” ___ !", "câ€™est clair"],
  ["â€” Jâ€™ai pas rÃ©visÃ©... â€” ___", "je croise les doigts"],
  ["â€” Il a encore gagnÃ© ? â€” ___", "tu mâ€™Ã©tonnes"],
  ["â€” On se voit ce soir ? â€” ___ ?", "Ã§a te va"],
  ["â€” Ce film ? ___", "Ã§a me dit rien"],
  ["â€” DÃ©solÃ©, je suis en retard. â€” ___", "pas de souci"],
  ["â€” Ce boulot me stresse. â€” ___", "jâ€™en peux plus"],
  ["â€” Tu sais pas ? â€” ___", "je ne sais pas"],
  ["â€” Tu viens ? â€” ___", "jâ€™arrive"],
  ["â€” Tu viens Ã  la fÃªte ? â€” ___", "je suis partant"],
  ["â€” Il a criÃ© devant tout le monde ? â€” ___ !", "jâ€™arrive pas Ã  croire"]
];

function speak(text) {
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = 'fr-FR';
  const voice = speechSynthesis.getVoices().find(v => v.lang === 'fr-FR');
  if (voice) utterance.voice = voice;
  speechSynthesis.speak(utterance);
}

speechSynthesis.onvoiceschanged = () => {};

function createTest() {
  const container = document.getElementById("test");
  data.forEach((item, i) => {
    container.innerHTML += `
      <div class="question">
        <button onclick="speak('${item[0]}')">ğŸ”Š Ã‰couter</button><br>
        <input type="text" id="q${i}" placeholder="Votre rÃ©ponse...">
        <span class="answer" id="a${i}"></span>
      </div>
    `;
  });
}

function checkTest() {
  let score = 0;
  data.forEach((item, i) => {
    const input = document.getElementById("q" + i);
    const expected = item[1].toLowerCase().trim();
    const user = input.value.toLowerCase().trim();
    const feedback = document.getElementById("a" + i);
    input.classList.remove("correct", "missed");
    if (user === expected) {
      input.classList.add("correct");
      feedback.textContent = "âœ…";
      score++;
    } else {
      input.classList.add("missed");
      feedback.textContent = `âŒ (${item[1]})`;
    }
  });
  document.getElementById("score").textContent = `RÃ©sultat : ${score} / ${data.length} bonne(s) rÃ©ponse(s).`;
}

window.onload = createTest;
</script>

</body>
</html>
