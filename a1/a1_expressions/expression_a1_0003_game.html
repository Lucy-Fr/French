<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Maxi-jeu : Expressions courantes (1â€“3)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; line-height: 1.6; }
    .question { margin-bottom: 20px; }
    .correct { background-color: #c8f7c5; }
    .missed { background-color: #fce3e3; }
    .answer { margin-left: 10px; }
    button { margin: 10px 5px; }
  </style>
</head>
<body>
  <h2>ğŸ¯ Maxi-jeu â€” RÃ©visez 30 expressions courantes</h2>
  <p>ComplÃ©tez chaque phrase avec l'expression correcte (choix multiple ou insertion manuelle). Cliquez sur ğŸ”Š pour Ã©couter.</p>
  <div id="game"></div>
  <p id="result"></p>
  <button onclick="checkGame()">VÃ©rifier</button>
  <button onclick="location.reload()">RÃ©initialiser</button>

  <p>
    <a href="../a1_expressions.html">â† Retour aux expressions</a> |
    <a href="../../index.html">ğŸ  Accueil</a>
  </p>

  <script>
    const expressions = [
      "Ã‡a marche", "Pas de souci", "Je suis dÃ©solÃ©(e)", "Câ€™est une bonne idÃ©e", "Pas du tout",
      "Dâ€™accord", "Tant pis", "Ã‡a dÃ©pend", "Câ€™est pas grave", "Avec plaisir",
      "Ã‡a me va", "Je suis dâ€™accord", "Je nâ€™en peux plus", "Pas maintenant", "Câ€™est gÃ©nial",
      "Je crois que oui", "Je ne sais pas", "Je plaisante", "Tu as raison", "DÃ©solÃ© pour le retard",
      "Ã‡a mâ€™est Ã©gal", "Tu plaisantes", "Je suis crevÃ©(e)", "Bonne chance", "Câ€™est dommage",
      "Je nâ€™ai pas le choix", "Je mâ€™en fiche", "Tu vas y arriver", "On se tient au courant", "Je croise les doigts"
    ];

    const questions = [
      ["â€” On se voit Ã  18h ? â€” ___", "Ã‡a marche", "select"],
      ["â€” Tu veux un cafÃ© ? â€” ___", "Avec plaisir", "select"],
      ["â€” Je nâ€™ai pas fini le projet. â€” ___", "Ce nâ€™est pas grave", "text"],
      ["â€” Je suis dÃ©solÃ© pour hier. â€” ___", "Pas de souci", "text"],
      ["â€” Tu veux sortir ce soir ? â€” ___", "Ã‡a dÃ©pend", "select"],
      ["â€” Je suis crevÃ© ! â€” ___", "Je nâ€™en peux plus", "select"],
      ["â€” Je ne peux pas venir. â€” ___", "Tant pis", "text"],
      ["â€” Tu veux venir ? â€” ___", "Pas du tout", "text"],
      ["â€” Jâ€™ai oubliÃ© de tâ€™appeler. â€” ___", "DÃ©solÃ© pour le retard", "select"],
      ["â€” Tu es prÃªt ? â€” ___", "Je crois que oui", "select"],
      ["â€” Câ€™est une mauvaise idÃ©e. â€” ___", "Tu as raison", "text"],
      ["â€” Câ€™est une bonne idÃ©e ! â€” ___", "Je suis dâ€™accord", "text"],
      ["â€” Tu vas rÃ©ussir ton examen ! â€” ___", "Je croise les doigts", "select"],
      ["â€” Tu es dâ€™accord ? â€” ___", "Ã‡a me va", "select"],
      ["â€” On reste en contact ? â€” ___", "On se tient au courant", "select"],
      ["â€” Câ€™est difficile, mais je dois le faire. â€” ___", "Je nâ€™ai pas le choix", "select"],
      ["â€” Tu veux quâ€™on sorte ? â€” ___", "Pas maintenant", "text"],
      ["â€” Je te souhaite bon courage ! â€” ___", "Bonne chance", "select"],
      ["â€” Je rigole. â€” ___", "Je plaisante", "text"],
      ["â€” Câ€™est super ! â€” ___", "Câ€™est gÃ©nial", "select"],
      ["â€” Tu tâ€™en fiches ? â€” ___", "Je mâ€™en fiche", "text"],
      ["â€” Câ€™est nul ! â€” ___", "Câ€™est dommage", "select"],
      ["â€” Tu rigoles ? â€” ___", "Tu plaisantes", "select"],
      ["â€” Je ne sais pas quoi faire. â€” ___", "Je ne sais pas", "text"],
      ["â€” Tu vas y arriver ! â€” ___", "Tu vas y arriver", "text"],
      ["â€” Câ€™est toi qui as raison. â€” ___", "Tu as raison", "text"],
      ["â€” Je nâ€™ai pas le choix. â€” ___", "Je nâ€™ai pas le choix", "text"],
      ["â€” On y va ensemble ? â€” ___", "Ã‡a me va", "text"],
      ["â€” Câ€™est difficile Ã  dire. â€” ___", "Ã‡a dÃ©pend", "select"],
      ["â€” Je suis trÃ¨s fatiguÃ©. â€” ___", "Je suis crevÃ©(e)", "select"]
    ];

    function speak(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'fr-FR';
      const voices = speechSynthesis.getVoices();
      const fr = voices.find(v => v.lang === 'fr-FR');
      if (fr) utterance.voice = fr;
      speechSynthesis.speak(utterance);
    }

    speechSynthesis.onvoiceschanged = () => {};

    function renderGame() {
      const container = document.getElementById("game");
      questions.forEach((q, i) => {
        let input;
        if (q[2] === "select") {
          const shuffled = [...expressions].sort(() => Math.random() - 0.5);
          input = `<select id="q${i}"><option value="">â€”</option>${shuffled.map(exp => `<option value="${exp}">${exp}</option>`).join("")}</select>`;
        } else {
          input = `<input type="text" id="q${i}" placeholder="...">`;
        }
        container.innerHTML += `
          <div class="question">
            <button onclick="speak('${q[0]} ${q[1]}')">ğŸ”Š</button>
            ${q[0].replace("___", input)} 
            <span class="answer" id="a${i}"></span>
          </div>
        `;
      });
    }

    function checkGame() {
      let score = 0;
      questions.forEach((q, i) => {
        const input = document.getElementById("q" + i);
        const correct = q[1].toLowerCase();
        const userVal = input.value.trim().toLowerCase();
        const feedback = document.getElementById("a" + i);
        input.classList.remove("correct", "missed");
        if (userVal === correct) {
          input.classList.add("correct");
          feedback.innerText = "âœ…";
          score++;
        } else {
          input.classList.add("missed");
          feedback.innerText = `âŒ (${q[1]})`;
        }
      });
      document.getElementById("result").innerText = `RÃ©sultat : ${score} bonne(s) rÃ©ponse(s) sur ${questions.length}.`;
    }

    window.onload = renderGame;
  </script>
</body>
</html>
