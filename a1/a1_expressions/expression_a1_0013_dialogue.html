<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Dialogue administratif ‚Äî Expressions √† choix</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; line-height: 1.6; }
    .question { margin-bottom: 20px; }
    .correct { background-color: #c8f7c5; }
    .missed { background-color: #fce3e3; }
    .hint { display: none; color: gray; font-style: italic; }
    .translation { display: none; margin-top: 5px; color: #444; font-style: italic; }
    select { padding: 5px; }
    button { margin-top: 5px; }
  </style>
</head>
<body>

<h2>üìë Dialogue administratif ‚Äî Compl√©tez les expressions</h2>
<p>Choisissez l'expression correcte dans chaque situation. Cliquez sur üîç pour un indice. Le texte sera traduit en russe apr√®s v√©rification.</p>

<div id="dialogue"></div>
<p id="score"></p>

<button onclick="checkAnswers()">V√©rifier</button>
<button onclick="location.reload()">R√©initialiser</button>

<p>
  <a href="../a1_expressions.html">‚Üê Retour aux expressions</a> |
  <a href="../../index.html">üè† Accueil</a>
</p>

<script>
const expressions = [
  "Je voudrais savoir", "Je n‚Äôai pas re√ßu", "J‚Äôai besoin de", "C‚Äôest urgent", "Je comprends bien",
  "Ce n‚Äôest pas clair", "Je suis d√©sol√©", "Je vais v√©rifier", "Merci de patienter", "Il me manque",
  "Je vous en prie", "Je dois le faire en ligne", "Je n‚Äôarrive pas √† acc√©der"
];

const distractors = [
  "Je mange une pomme", "Je vais √† la piscine", "Il pleut demain", "C‚Äôest un bon film",
  "Je suis √† la plage", "J‚Äôai trois chats", "Tu veux du pain ?", "Elle danse bien",
  "C‚Äôest int√©ressant", "Je joue au tennis"
];

const dialogueLines = [
  {
    text: "‚Äî Bonjour madame. ___ si mon dossier a √©t√© valid√©.",
    answer: "Je voudrais savoir",
    hint: "Formule polie pour demander une information.",
    translation: "‚Äî –î–æ–±—Ä–∏–π –¥–µ–Ω—å, –ø–∞–Ω—ñ. –Ø —Ö–æ—Ç—ñ–≤(–ª–∞) –±–∏ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è, —á–∏ –±—É–ª–∞ –º–æ—è —Å–ø—Ä–∞–≤–∞ —Å—Ö–≤–∞–ª–µ–Ω–∞."
  },
  {
    text: "‚Äî Bonjour. Un instant‚Ä¶ ___ quelques minutes.",
    answer: "Merci de patienter",
    hint: "Expression pour demander d‚Äôattendre poliment.",
    translation: "‚Äî –î–æ–±—Ä–∏–π –¥–µ–Ω—å. –û–¥–∏–Ω –º–æ–º–µ–Ω—Ç... –î—è–∫—É—é, —â–æ —á–µ–∫–∞—î—Ç–µ."
  },
  {
    text: "‚Äî ___ le justificatif de domicile.",
    answer: "Il me manque",
    hint: "Vous dites que vous n‚Äôavez pas un document.",
    translation: "‚Äî –£ –º–µ–Ω–µ –Ω–µ–º–∞—î –¥–æ–≤—ñ–¥–∫–∏ –ø—Ä–æ –º—ñ—Å—Ü–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–Ω—è."
  },
  {
    text: "‚Äî Vous devez nous l‚Äôapporter avant vendredi.",
    gap: false
  },
  {
    text: "‚Äî ___ l‚Äôobtenir rapidement.",
    answer: "J‚Äôai besoin de",
    hint: "Vous exprimez un besoin administratif.",
    translation: "‚Äî –ú–µ–Ω—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –π–æ–≥–æ —à–≤–∏–¥–∫–æ –æ—Ç—Ä–∏–º–∞—Ç–∏."
  },
  {
    text: "‚Äî ___ car mon titre de s√©jour expire demain.",
    answer: "C‚Äôest urgent",
    hint: "Vous exprimez une urgence.",
    translation: "‚Äî –¶–µ —Ç–µ—Ä–º—ñ–Ω–æ–≤–æ, –±–æ –º—ñ–π –¥–æ–∑–≤—ñ–ª –Ω–∞ –ø—Ä–æ–∂–∏–≤–∞–Ω–Ω—è –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è –∑–∞–≤—Ç—Ä–∞."
  },
  {
    text: "‚Äî ___, mais je ne peux rien faire sans ce document.",
    answer: "Je comprends bien",
    hint: "Vous montrez que vous comprenez la situation.",
    translation: "‚Äî –Ø —Ä–æ–∑—É–º—ñ—é, –∞–ª–µ —è –Ω—ñ—á–æ–≥–æ –Ω–µ –º–æ–∂—É –∑—Ä–æ–±–∏—Ç–∏ –±–µ–∑ —Ü—å–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞."
  },
  {
    text: "‚Äî ___, vous devez prendre rendez-vous en ligne.",
    answer: "Je suis d√©sol√©",
    hint: "Formule polie pour annoncer une difficult√©.",
    translation: "‚Äî –í–∏–±–∞—á—Ç–µ, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø–∏—Å–∞—Ç–∏—Å—è –æ–Ω–ª–∞–π–Ω."
  },
  {
    text: "‚Äî ___ au site internet, √ßa bloque √† chaque fois.",
    answer: "Je n‚Äôarrive pas √† acc√©der",
    hint: "Vous avez un probl√®me technique.",
    translation: "‚Äî –Ø –Ω–µ –º–æ–∂—É –∑–∞–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç, –≤—ñ–Ω –ø–æ—Å—Ç—ñ–π–Ω–æ –∑–∞–≤–∏—Å–∞—î."
  },
  {
    text: "‚Äî Dans ce cas, ___ avec mes coll√®gues.",
    answer: "Je vais v√©rifier",
    hint: "Vous allez demander plus d‚Äôinformations.",
    translation: "‚Äî –£ —Ç–∞–∫–æ–º—É —Ä–∞–∑—ñ —è —É—Ç–æ—á–Ω—é –∑ –∫–æ–ª–µ–≥–∞–º–∏."
  },
  {
    text: "‚Äî ___ votre aide et votre compr√©hension.",
    answer: "Je vous en prie",
    hint: "R√©ponse polie √† quelqu‚Äôun qui vous remercie.",
    translation: "‚Äî –ü—Ä–æ—à—É, –∑–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—è (—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ ¬´–¥—è–∫—É—é¬ª)."
  },
  {
    text: "‚Äî ___ de r√©ponse depuis trois semaines.",
    answer: "Je n‚Äôai pas re√ßu",
    hint: "Vous n‚Äôavez pas eu de retour.",
    translation: "‚Äî –Ø –Ω–µ –æ—Ç—Ä–∏–º—É–≤–∞–≤(-–ª–∞) –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤–∂–µ —Ç—Ä–∏ —Ç–∏–∂–Ω—ñ."
  },
  {
    text: "‚Äî Dans ce cas, ___ une nouvelle demande.",
    answer: "Je dois le faire en ligne",
    hint: "Vous devez faire la d√©marche via Internet.",
    translation: "‚Äî –£ —Ç–∞–∫–æ–º—É –≤–∏–ø–∞–¥–∫—É —è –ø–æ–≤–∏–Ω–µ–Ω(-–Ω–∞) –ø–æ–¥–∞—Ç–∏ –Ω–æ–≤—É –∑–∞—è–≤—É –æ–Ω–ª–∞–π–Ω."
  },
  {
    text: "‚Äî ___ ce que vous me dites.",
    answer: "Ce n‚Äôest pas clair",
    hint: "Vous dites que ce n‚Äôest pas compr√©hensible.",
    translation: "‚Äî –ú–µ–Ω—ñ –Ω–µ –∑–æ–≤—Å—ñ–º –∑—Ä–æ–∑—É–º—ñ–ª–æ, —â–æ –≤–∏ –∫–∞–∂–µ—Ç–µ."
  }
];

function shuffle(arr) {
  return [...arr].sort(() => Math.random() - 0.5);
}

function createDialogue() {
  const container = document.getElementById("dialogue");
  let index = 0;
  dialogueLines.forEach((line, i) => {
    let html = `<div class="question"><strong>Ligne ${i + 1}:</strong> `;
    if (!line.answer) {
      html += `${line.text}</div>`;
    } else {
      const options = shuffle([
        line.answer,
        ...shuffle(distractors).slice(0, 5)
      ]);
      html += line.text.replace("___", `
        <select id="q${index}">
          <option value="">‚Äî</option>
          ${options.map(e => `<option value="${e}">${e}</option>`).join("")}
        </select>
        <button onclick="document.getElementById('hint${index}').style.display='inline'">üîç Voir l‚Äôindice</button>
        <div class="hint" id="hint${index}">${line.hint}</div>
        <div class="translation" id="tr${index}">${line.translation}</div>
      `);
      html += `</div>`;
      index++;
    }
    container.innerHTML += html;
  });
}

function checkAnswers() {
  let score = 0;
  let total = 0;
  let index = 0;
  dialogueLines.forEach(line => {
    if (line.answer) {
      const input = document.getElementById("q" + index);
      const translation = document.getElementById("tr" + index);
      if (input) {
        total++;
        const user = input.value;
        input.classList.remove("correct", "missed");
        if (user === line.answer) {
          input.classList.add("correct");
          score++;
        } else {
          input.classList.add("missed");
        }
        if (translation) translation.style.display = "block";
        index++;
      }
    }
  });
  document.getElementById("score").innerText = `R√©sultat : ${score} / ${total} bonne(s) r√©ponse(s).`;
}

window.onload = createDialogue;
</script>

</body>
</html>
