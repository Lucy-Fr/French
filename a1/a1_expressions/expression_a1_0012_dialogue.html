<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Grand dialogue 2 ‚Äî Expressions √† choix</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; line-height: 1.6; }
    .question { margin-bottom: 20px; }
    .correct { background-color: #c8f7c5; }
    .missed { background-color: #fce3e3; }
    .hint { display: none; color: gray; font-style: italic; }
    .translation { display: none; margin-top: 5px; color: #444; font-style: italic; }
    select { padding: 5px; }
    button { margin-top: 5px; }
  </style>
</head>
<body>

<h2>üó£Ô∏è Grand dialogue ‚Äî Partie 2</h2>
<p>Choisissez les bonnes expressions dans le dialogue. Cliquez sur üîç pour un indice. Apr√®s v√©rification, le texte sera traduit en russe.</p>

<div id="dialogue"></div>
<p id="score"></p>

<button onclick="checkAnswers()">V√©rifier</button>
<button onclick="location.reload()">R√©initialiser</button>

<p>
  <a href="../a1_expressions.html">‚Üê Retour aux expressions</a> |
  <a href="../../index.html">üè† Accueil</a>
</p>

<script>
const expressions = [
  "T'inqui√®te", "Je suis crev√©", "C‚Äôest pas mal", "Tu m‚Äô√©tonnes", "J‚Äôen peux plus",
  "C‚Äôest clair", "Je m‚Äôen occupe", "Je suis partant", "√áa me dit rien", "Tu rigoles ou quoi ?",
  "On s‚Äôarrache", "J‚Äôai failli oublier", "C‚Äôest pas gagn√©"
];

const distractors = [
  "Bonne soir√©e", "Je vais au march√©", "C‚Äôest trop t√¥t", "Je pars demain", "Je suis en train",
  "J‚Äôai oubli√© le code", "Tu veux un caf√© ?", "C‚Äôest difficile √† dire", "J‚Äôaime les chats", "Tu r√™ves"
];

const dialogueLines = [
  {
    text: "‚Äî Salut ! Tu veux venir au cin√© ce soir ?",
    answer: "Je suis partant",
    hint: "Expression pour dire qu‚Äôon accepte une invitation.",
    translation: "‚Äî –ü—Ä–∏–≤—ñ—Ç! –•–æ—á–µ—à –ø—ñ—Ç–∏ –≤ –∫—ñ–Ω–æ —Å—å–æ–≥–æ–¥–Ω—ñ –≤–≤–µ—á–µ—Ä—ñ? ‚Äî –Ø –∑–∞!"
  },
  {
    text: "‚Äî Super. Y a un nouveau film fran√ßais qui sort.",
    gap: false
  },
  {
    text: "‚Äî Ah bon ? ___, les films fran√ßais sont souvent sympas.",
    answer: "Tu m‚Äô√©tonnes",
    hint: "Expression ironique : on est d‚Äôaccord.",
    translation: "‚Äî –°–ø—Ä–∞–≤–¥—ñ? –ù–µ –¥–∏–≤–Ω–æ, —Ñ—Ä–∞–Ω—Ü—É–∑—å–∫—ñ —Ñ—ñ–ª—å–º–∏ –∑–∞–∑–≤–∏—á–∞–π —Ö–æ—Ä–æ—à—ñ."
  },
  {
    text: "‚Äî Je te prends une place ?",
    gap: false
  },
  {
    text: "‚Äî Oui, merci. ___ !",
    answer: "Je m‚Äôen occupe",
    hint: "Tu dis que tu vas faire quelque chose.",
    translation: "‚Äî –¢–∞–∫, –¥—è–∫—É—é. –Ø —Å–∞–º —Ü–∏–º –∑–∞–π–º—É—Å—è."
  },
  {
    text: "‚Äî Tu vas bien sinon ?",
    gap: false
  },
  {
    text: "‚Äî Franchement, non‚Ä¶ ___ depuis ce matin.",
    answer: "J‚Äôen peux plus",
    hint: "Tu es tr√®s fatigu√©, stress√© ou √©nerv√©.",
    translation: "‚Äî –ß–µ—Å–Ω–æ –∫–∞–∂—É—á–∏, –Ω—ñ‚Ä¶ –Ø –≤–∂–µ –Ω–µ –≤–∏—Ç—Ä–∏–º—É—é –∑ —Å–∞–º–æ–≥–æ —Ä–∞–Ω–∫—É."
  },
  {
    text: "‚Äî T‚Äôas encore eu des r√©unions inutiles ?",
    gap: false
  },
  {
    text: "‚Äî Oui, et le chef a chang√© tout le projet. ___ !",
    answer: "Tu rigoles ou quoi ?",
    hint: "Pour montrer qu‚Äôon est choqu√© ou en col√®re.",
    translation: "‚Äî –¢–∞–∫, —ñ –Ω–∞—á–∞–ª—å–Ω–∏–∫ –∑–º—ñ–Ω–∏–≤ —É–≤–µ—Å—å –ø—Ä–æ—î–∫—Ç. ‚Äî –¢–∏ –∂–∞—Ä—Ç—É—î—à?!"
  },
  {
    text: "‚Äî On va boire un verre avant le film ?",
    gap: false
  },
  {
    text: "‚Äî Pourquoi pas, mais ___, j‚Äôai dormi 4 heures.",
    answer: "Je suis crev√©",
    hint: "Tu es tr√®s fatigu√©.",
    translation: "‚Äî –ß–æ–º—É –± —ñ –Ω—ñ, –∞–ª–µ —è –≤–∏—Å–Ω–∞–∂–µ–Ω–∏–π, —è —Å–ø–∞–≤ –ª–∏—à–µ 4 –≥–æ–¥–∏–Ω–∏."
  },
  {
    text: "‚Äî Bon alors, on se retrouve √† 19h devant le cin√©ma ?",
    gap: false
  },
  {
    text: "‚Äî OK. ___, je dois finir un mail avant.",
    answer: "C‚Äôest clair",
    hint: "Expression pour dire qu‚Äôon confirme ou approuve.",
    translation: "‚Äî –ì–∞—Ä–∞–∑–¥. –û–¥–Ω–æ–∑–Ω–∞—á–Ω–æ, –º–µ–Ω—ñ —â–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–ø–∏—Å–∞—Ç–∏ –ª–∏—Å—Ç–∞."
  },
  {
    text: "‚Äî Et le resto apr√®s ?",
    gap: false
  },
  {
    text: "‚Äî Hmm‚Ä¶ ___, j‚Äôai pas trop faim.",
    answer: "√áa me dit rien",
    hint: "Expression pour dire qu‚Äôon n‚Äôa pas envie.",
    translation: "‚Äî –•–º‚Ä¶ –ú–µ–Ω—ñ —â–æ—Å—å –Ω–µ —Ö–æ—á–µ—Ç—å—Å—è, —è –Ω–µ –¥—É–∂–µ –≥–æ–ª–æ–¥–Ω–∏–π."
  },
  {
    text: "‚Äî T‚Äôas pens√© √† prendre ta carte d‚Äô√©tudiant ?",
    gap: false
  },
  {
    text: "‚Äî Mince ! ___ !",
    answer: "J‚Äôai failli oublier",
    hint: "Tu as presque oubli√© quelque chose.",
    translation: "‚Äî –û–π! –Ø –ª–µ–¥—å –Ω–µ –∑–∞–±—É–≤!"
  },
  {
    text: "‚Äî On prend les tickets et ___ ?",
    answer: "On s‚Äôarrache",
    hint: "Expression famili√®re pour dire 'on y va / on part'.",
    translation: "‚Äî –ö—É–ø–∏–º–æ –∫–≤–∏—Ç–∫–∏ ‚Äî —ñ –≥–∞–π–¥–∞?"
  },
  {
    text: "‚Äî Il va pleuvoir ce soir‚Ä¶",
    gap: false
  },
  {
    text: "‚Äî ___, j‚Äôai pris mon parapluie.",
    answer: "T'inqui√®te",
    hint: "Expression pour rassurer.",
    translation: "‚Äî –ù–µ —Ö–≤–∏–ª—é–π—Å—è, —è –≤–∑—è–≤ –ø–∞—Ä–∞—Å–æ–ª—å–∫—É."
  },
  {
    text: "‚Äî Et t‚Äôas compris les r√®gles du jeu du film interactif ?",
    gap: false
  },
  {
    text: "‚Äî Pas vraiment‚Ä¶ ___.",
    answer: "C‚Äôest pas gagn√©",
    hint: "Quand quelque chose semble difficile.",
    translation: "‚Äî –ù–µ –¥—É–∂–µ‚Ä¶ –°—É–º–Ω—ñ–≤–Ω–æ, —â–æ –≤—Å–µ –≤–∏–π–¥–µ."
  }
];

function shuffle(arr) {
  return [...arr].sort(() => Math.random() - 0.5);
}

function createDialogue() {
  const container = document.getElementById("dialogue");
  let index = 0;

  dialogueLines.forEach((line, i) => {
    let html = `<div class="question"><strong>Ligne ${i + 1}:</strong> `;
    if (line.gap === false || !line.answer) {
      html += `${line.text}</div>`;
    } else {
      const choices = shuffle([
        line.answer,
        ...shuffle(distractors).slice(0, 5)
      ]);
      html += `${line.text.replace("___", `
        <select id="q${index}">
          <option value="">‚Äî</option>
          ${choices.map(opt => `<option value="${opt}">${opt}</option>`).join("")}
        </select>
        <button onclick="document.getElementById('hint${index}').style.display='inline'">üîç Voir l‚Äôindice</button>
        <div class="hint" id="hint${index}">${line.hint}</div>
        <div class="translation" id="tr${index}">${line.translation}</div>
      `)}</div>`;
      index++;
    }
    container.innerHTML += html;
  });
}

function checkAnswers() {
  let score = 0;
  let total = 0;
  let index = 0;
  dialogueLines.forEach(line => {
    if (line.answer) {
      const input = document.getElementById("q" + index);
      const translation = document.getElementById("tr" + index);
      if (input) {
        total++;
        const val = input.value;
        input.classList.remove("correct", "missed");
        if (val === line.answer) {
          input.classList.add("correct");
          score++;
        } else {
          input.classList.add("missed");
        }
        if (translation) translation.style.display = "block";
        index++;
      }
    }
  });
  document.getElementById("score").innerText = `R√©sultat : ${score} / ${total} bonne(s) r√©ponse(s).`;
}

window.onload = createDialogue;
</script>

</body>
</html>
