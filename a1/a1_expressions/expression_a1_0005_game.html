<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Maxi-jeu 2 â€” Expressions courantes (sÃ©ries 4 Ã  6)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; line-height: 1.6; }
    .question { margin-bottom: 20px; }
    .correct { background-color: #c8f7c5; }
    .missed { background-color: #fce3e3; }
    .answer { margin-left: 10px; }
    button { margin: 10px 5px; }
  </style>
</head>
<body>
  <h2>ğŸ¯ Maxi-jeu â€” Expressions courantes (SÃ©ries 4 Ã  6)</h2>
  <p>ComplÃ©tez chaque phrase avec l'expression correcte. Cliquez sur ğŸ”Š pour Ã©couter.</p>
  <div id="game"></div>
  <p id="result"></p>
  <button onclick="checkGame()">VÃ©rifier</button>
  <button onclick="location.reload()">RÃ©initialiser</button>

  <p>
    <a href="../a1_expressions.html">â† Retour aux expressions</a> |
    <a href="../../index.html">ğŸ  Accueil</a>
  </p>

  <script>
    const expressions = [
      "Ã‡a me saoule", "Câ€™est chiant", "Tu te fiches de moi ?", "Je mâ€™en sors pas", "Câ€™est pas donnÃ©",
      "Câ€™est pas mal", "Tu te moques ?", "Tu veux rire ?", "Câ€™est pas mon truc", "Câ€™est pas terrible",
      "Ã‡a y est", "Je suis partant(e)", "Tu gÃ¨res", "Jâ€™ai la flemme", "Je me suis plantÃ©(e)",
      "Nickel", "Laisse tomber", "On se casse", "Câ€™est nul", "Franchement",
      "Tâ€™inquiÃ¨te", "Y a pas de souci", "Jâ€™arrive pas Ã  croire", "Ã‡a fait longtemps", "Câ€™est clair",
      "Ã‡a te va ?", "Ã‡a me dit rien", "Câ€™est pas grave", "Tu mâ€™Ã©tonnes", "Ã‡a ne me regarde pas"
    ];

    const questions = [
      ["â€” Il pleut encore. â€” ___", "Câ€™est chiant", "select"],
      ["â€” Je me suis trompÃ© dâ€™arrÃªt. â€” ___", "Je me suis plantÃ©(e)", "select"],
      ["â€” Câ€™est pas trÃ¨s bon. â€” ___", "Câ€™est pas terrible", "text"],
      ["â€” Tu fais encore une blague ? â€” ___", "Tu veux rire ?", "text"],
      ["â€” Jâ€™ai tout rangÃ©. â€” ___", "Nickel", "select"],
      ["â€” Il a oubliÃ© mon annivâ€¦ â€” ___", "Laisse tomber", "text"],
      ["â€” Tu veux venir ? â€” ___", "Je suis partant(e)", "select"],
      ["â€” Câ€™est fini ? â€” ___", "Ã‡a y est", "select"],
      ["â€” Il tâ€™a encore menti ? â€” ___", "Tu te fiches de moi ?", "text"],
      ["â€” Câ€™est trÃ¨s cher ! â€” ___", "Câ€™est pas donnÃ©", "select"],
      ["â€” Tâ€™as bien gÃ©rÃ© ce projet ! â€” ___", "Tu gÃ¨res", "text"],
      ["â€” Tu veux sortir ? â€” ___", "Jâ€™ai la flemme", "text"],
      ["â€” Jâ€™ai encore oubliÃ© mes clÃ©sâ€¦ â€” ___", "Je mâ€™en sors pas", "select"],
      ["â€” Ce film est nul ! â€” ___", "Câ€™est nul", "text"],
      ["â€” Je sais pas si jâ€™aime Ã§a. â€” ___", "Câ€™est pas mon truc", "select"],
      ["â€” Il fait froid. â€” ___", "On se casse", "text"],
      ["â€” Jâ€™ai pas trop aimÃ©. â€” ___", "Câ€™est pas mal", "select"],
      ["â€” Tu viens ? â€” ___", "Ã‡a me saoule", "text"],
      ["â€” Je dois refaire tout le travail. â€” ___", "Franchement", "select"],
      ["â€” Tâ€™as compris ? â€” ___", "Tâ€™inquiÃ¨te", "text"],
      ["â€” Merci pour ton aide ! â€” ___", "Y a pas de souci", "text"],
      ["â€” Il a gagnÃ© au loto ? â€” ___", "Jâ€™arrive pas Ã  croire", "select"],
      ["â€” Tu vas bien ? â€” ___", "Ã‡a fait longtemps", "text"],
      ["â€” Il abuse grave ! â€” ___", "Câ€™est clair", "select"],
      ["â€” On se retrouve Ã  20h. ___ ?", "Ã‡a te va ?", "text"],
      ["â€” Tu connais ce chanteur ? â€” ___", "Ã‡a me dit rien", "text"],
      ["â€” Je suis dÃ©solÃ©. â€” ___", "Câ€™est pas grave", "text"],
      ["â€” Il recommence encoreâ€¦ â€” ___", "Tu mâ€™Ã©tonnes", "text"],
      ["â€” Regarde ce message. â€” ___", "Ã‡a ne me regarde pas", "select"],
      ["â€” Il crie tout le temps ! â€” ___", "Ã‡a me saoule", "text"],
      ["â€” On a fini. â€” ___", "Ã‡a y est", "select"]
    ];

    function speak(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'fr-FR';
      const voices = speechSynthesis.getVoices();
      const fr = voices.find(v => v.lang === 'fr-FR');
      if (fr) utterance.voice = fr;
      speechSynthesis.speak(utterance);
    }

    speechSynthesis.onvoiceschanged = () => {};

    function renderGame() {
      const container = document.getElementById("game");
      questions.forEach((q, i) => {
        let input;
        if (q[2] === "select") {
          const shuffled = [...expressions].sort(() => Math.random() - 0.5);
          input = `<select id="q${i}"><option value="">â€”</option>${shuffled.map(exp => `<option value="${exp}">${exp}</option>`).join("")}</select>`;
        } else {
          input = `<input type="text" id="q${i}" placeholder="...">`;
        }
        container.innerHTML += `
          <div class="question">
            <button onclick="speak('${q[0]} ${q[1]}')">ğŸ”Š</button>
            ${q[0].replace("___", input)} 
            <span class="answer" id="a${i}"></span>
          </div>
        `;
      });
    }

    function checkGame() {
      let score = 0;
      questions.forEach((q, i) => {
        const input = document.getElementById("q" + i);
        const correct = q[1].toLowerCase();
        const userVal = input.value.trim().toLowerCase();
        const feedback = document.getElementById("a" + i);
        input.classList.remove("correct", "missed");
        if (userVal === correct) {
          input.classList.add("correct");
          feedback.innerText = "âœ…";
          score++;
        } else {
          input.classList.add("missed");
          feedback.innerText = `âŒ (${q[1]})`;
        }
      });
      document.getElementById("result").innerText = `RÃ©sultat : ${score} bonne(s) rÃ©ponse(s) sur ${questions.length}.`;
    }

    window.onload = renderGame;
  </script>
</body>
</html>
