<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Exercice interactif : les pr√©positions √†, en, dans</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .question { margin-bottom: 20px; }
    .explanation { color: green; display: none; margin-top: 5px; }
    .result { font-weight: bold; margin-top: 20px; }
    .correct { background-color: #c8f7c5; }
    .missed { background-color: #fce3e3; }
    button { margin-top: 10px; margin-right: 10px; }
  </style>
</head>
<body>
<h2>Exercice interactif : Choisissez le(s) bon(s) pr√©position(s)</h2>

<div id="questions-container"></div>

<button onclick="showAnswers()">V√©rifier les r√©ponses</button>
<button onclick="resetQuiz()">R√©initialiser</button>
<p id="summary" class="result" style="display: none;"></p>

<script>
const data = [
  ["Il habite ___ Paris.", "√†", "dans", "en", "par", ["√†"], "–û–Ω –∂–∏–≤—ë—Ç –≤ –ü–∞—Ä–∏–∂–µ."],
  ["Nous sommes ___ la salle d'attente.", "dans", "en", "√†", "sur", ["dans"], "–ú—ã –≤ –∑–∞–ª–µ –æ–∂–∏–¥–∞–Ω–∏—è."],
  ["Elle travaille ___ France.", "en", "√†", "dans", "chez", ["en"], "–û–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –§—Ä–∞–Ω—Ü–∏–∏."],
  ["Je vais ___ l'universit√©.", "√†", "dans", "chez", "par", ["√†", "dans"], "–Ø –∏–¥—É –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç."],
  ["Ils vivent ___ une maison en bois.", "dans", "en", "√†", "par", ["dans"], "–û–Ω–∏ –∂–∏–≤—É—Ç –≤ –¥–µ—Ä–µ–≤—è–Ω–Ω–æ–º –¥–æ–º–µ."],
  ["On va ___ la campagne ce week-end.", "√†", "dans", "en", "chez", ["√†"], "–ú—ã –µ–¥–µ–º –∑–∞ –≥–æ—Ä–æ–¥ –≤ –≤—ã—Ö–æ–¥–Ω—ã–µ."],
  ["Elle est rest√©e ___ l'h√¥tel toute la journ√©e.", "√†", "dans", "en", "sur", ["√†", "dans"], "–û–Ω–∞ –≤–µ—Å—å –¥–µ–Ω—å –ø—Ä–æ–≤–µ–ª–∞ –≤ –≥–æ—Å—Ç–∏–Ω–∏—Ü–µ."],
  ["Tu √©tudies ___ Italie ?", "en", "√†", "dans", "par", ["en"], "–¢—ã —É—á–∏—à—å—Å—è –≤ –ò—Ç–∞–ª–∏–∏?"],
  ["Il est ___ l'administration depuis 10 ans.", "dans", "√†", "chez", "en", ["dans"], "–û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ 10 –ª–µ—Ç."],
  ["On part ___ la montagne demain matin.", "√†", "en", "dans", "chez", ["√†", "en"], "–ó–∞–≤—Ç—Ä–∞ —É—Ç—Ä–æ–º –º—ã —É–µ–∑–∂–∞–µ–º –≤ –≥–æ—Ä—ã."],
  ["Elle est retourn√©e ___ la biblioth√®que.", "√†", "dans", "en", "chez", ["√†", "dans"], "–û–Ω–∞ –≤–µ—Ä–Ω—É–ª–∞—Å—å –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É."],
  ["Nous logeons ___ un petit appartement.", "dans", "en", "√†", "chez", ["dans"], "–ú—ã –∂–∏–≤—ë–º –≤ –º–∞–ª–µ–Ω—å–∫–æ–π –∫–≤–∞—Ä—Ç–∏—Ä–µ."],
  ["Il est n√© ___ Espagne.", "en", "√†", "dans", "chez", ["en"], "–û–Ω —Ä–æ–¥–∏–ª—Å—è –≤ –ò—Å–ø–∞–Ω–∏–∏."],
  ["Ils habitent ___ une rue tranquille.", "dans", "√†", "en", "chez", ["dans"], "–û–Ω–∏ –∂–∏–≤—É—Ç –Ω–∞ —Å–ø–æ–∫–æ–π–Ω–æ–π —É–ª–∏—Ü–µ."],
  ["Je suis ___ caf√© du coin.", "au", "dans", "√†", "en", ["au", "dans"], "–Ø –≤ –∫–∞—Ñ–µ –Ω–∞ —É–≥–ª—É."],
  ["Nous avons d√©jeun√© ___ la terrasse.", "sur", "dans", "en", "√†", ["sur"], "–ú—ã –æ–±–µ–¥–∞–ª–∏ –Ω–∞ —Ç–µ—Ä—Ä–∞—Å–µ."],
  ["Il travaille ___ une entreprise internationale.", "dans", "en", "chez", "√†", ["dans", "chez"], "–û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π –∫–æ–º–ø–∞–Ω–∏–∏."],
  ["Je suis n√© ___ Lyon.", "√†", "dans", "en", "chez", ["√†"], "–Ø —Ä–æ–¥–∏–ª—Å—è –≤ –õ–∏–æ–Ω–µ."],
  ["Ils vont ___ la mairie pour se marier.", "√†", "dans", "chez", "en", ["√†"], "–û–Ω–∏ –∏–¥—É—Ç –≤ –º—ç—Ä–∏—é, —á—Ç–æ–±—ã –ø–æ–∂–µ–Ω–∏—Ç—å—Å—è."],
  ["Elle attend ___ la r√©ception.", "√†", "en", "dans", "chez", ["√†", "dans"], "–û–Ω–∞ –∂–¥—ë—Ç —É —Å—Ç–æ–π–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏."]
];

const correctAnswers = {};
const container = document.getElementById("questions-container");

function createQuiz() {
  container.innerHTML = "";
  for (let i = 0; i < data.length; i++) {
    const [text, opt1, opt2, opt3, opt4, correct, translation] = data[i];
    const qId = "q" + (i + 1);
    correctAnswers[qId] = correct;

    const block = document.createElement("div");
    block.className = "question";

    let html = `<p>${i + 1}. ${text}</p>`;
    [opt1, opt2, opt3, opt4].forEach(opt => {
      html += `<label><input type="checkbox" name="${qId}" value="${opt}"> ${opt}</label><br>`;
    });
    html += `<div class="explanation" id="exp${i + 1}" style="display:none;">‚úÖ ${correct.join(" / ")}<br>‚ú® <em>${translation}</em></div>`;

    block.innerHTML = html;
    container.appendChild(block);
  }
}

function showAnswers() {
  let totalCorrect = 0;
  let totalSelectedCorrect = 0;

  for (let i = 1; i <= data.length; i++) {
    const qName = "q" + i;
    const checkboxes = document.querySelectorAll(`input[name='${qName}']`);
    const correctSet = new Set(correctAnswers[qName]);

    checkboxes.forEach(cb => {
      cb.parentElement.classList.remove("correct", "missed");
      if (cb.checked && correctSet.has(cb.value)) {
        totalSelectedCorrect++;
        cb.parentElement.classList.add("correct");
      } else if (!cb.checked && correctSet.has(cb.value)) {
        cb.parentElement.classList.add("missed");
      }
    });

    totalCorrect += correctSet.size;
    document.getElementById("exp" + i).style.display = "block";
  }

  document.getElementById("summary").innerText =
    `Vous avez s√©lectionn√© ${totalSelectedCorrect} bonne(s) r√©ponse(s) sur ${totalCorrect} possibles.`;
  document.getElementById("summary").style.display = "block";
}

function resetQuiz() {
  const inputs = document.querySelectorAll("input[type='checkbox']");
  inputs.forEach(input => input.checked = false);

  const labels = document.querySelectorAll("label");
  labels.forEach(label => label.classList.remove("correct", "missed"));

  for (let i = 1; i <= data.length; i++) {
    document.getElementById("exp" + i).style.display = "none";
  }
  document.getElementById("summary").style.display = "none";
}

createQuiz();
</script>
<p>
  <a href="../a1_prepositions.html">‚Üê –ù–∞–∑–∞–¥ –∫ –ø—Ä–µ–¥–ª–æ–≥–∞–º</a> |
  <a href="../../index.html">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
</p>
</body>
</html>
